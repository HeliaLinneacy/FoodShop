<!DOCTYPE html>
<html lang="vi">
<head>
<meta charset="UTF-8">
<title>Thanh toÃ¡n</title>
<script src="https://cdn.tailwindcss.com"></script>
</head>

<body class="bg-pink-50 p-6">

<div class="max-w-4xl mx-auto grid md:grid-cols-2 gap-6">

<!-- ThÃ´ng tin -->
<div class="bg-white p-6 rounded-xl shadow">
  <h2 class="font-bold text-lg text-pink-600 mb-4">ğŸšš ThÃ´ng tin giao hÃ ng</h2>

  <input id="name" placeholder="Há» tÃªn"
    class="w-full border p-2 rounded mb-3">

  <input id="phone" placeholder="Sá»‘ Ä‘iá»‡n thoáº¡i"
    class="w-full border p-2 rounded mb-3">

  <input id="address" placeholder="Äá»‹a chá»‰"
    class="w-full border p-2 rounded mb-3">

  <select id="pay" class="w-full border p-2 rounded">
    <option>COD</option>
    <option>Chuyá»ƒn khoáº£n</option>
  </select>
</div>

<!-- ÄÆ¡n hÃ ng -->
<div class="bg-white p-6 rounded-xl shadow">
  <h2 class="font-bold text-lg text-pink-600 mb-4">ğŸ›’ ÄÆ¡n hÃ ng</h2>
  <div id="items"></div>

  <div class="flex justify-between font-bold mt-4">
    <span>Tá»•ng:</span>
    <span id="total">0Ä‘</span>
  </div>

  <button onclick="pay()"
    class="w-full mt-5 bg-pink-600 text-white py-3 rounded">
    âœ… XÃ¡c nháº­n thanh toÃ¡n
  </button>
</div>

</div>

<script>
let cart = JSON.parse(localStorage.getItem("cart")) || [];
let orders = JSON.parse(localStorage.getItem("orders")) || [];

function render(){
  let total = 0;
  const box = document.getElementById("items");
  box.innerHTML = "";

  cart.forEach(i=>{
    const sum = i.price * i.qty;
    total += sum;
    box.innerHTML += `
      <div class="flex justify-between mb-2">
        <span>${i.name} x ${i.qty}</span>
        <span>${sum.toLocaleString()}Ä‘</span>
      </div>
    `;
  });

  document.getElementById("total").innerText =
    total.toLocaleString() + "Ä‘";
}

function pay(){
  if(cart.length === 0){
    alert("Giá» hÃ ng trá»‘ng!");
    return;
  }

  orders.push({
    id: "DH" + Date.now(),
    items: cart,
    total: cart.reduce((s,i)=>s+i.price*i.qty,0),
    status: "Äang xá»­ lÃ½"
  });

  localStorage.setItem("orders", JSON.stringify(orders));
  localStorage.removeItem("cart");

  alert("ğŸ‰ Thanh toÃ¡n thÃ nh cÃ´ng!");
  window.location.href = "/user";   // hoáº·c "/"
}

render();
</script>

</body>
</html>
